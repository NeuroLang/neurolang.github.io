
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples/plot_load_destrieux_left_hemisphere_gyri.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_auto_examples_plot_load_destrieux_left_hemisphere_gyri.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_plot_load_destrieux_left_hemisphere_gyri.py:


Loading and Querying the Destrieux et al. Atlas' Left Hemisphere
========================================================================


Uploading the Destrieux regions NeuroLang and
executing a simple query.

.. GENERATED FROM PYTHON SOURCE LINES 10-17

.. code-block:: default


    from matplotlib import pyplot as plt
    import nibabel as nib
    from nilearn import datasets, plotting
    from neurolang.frontend import NeurolangDL






.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    /usr/local/lib/python3.7/importlib/_bootstrap.py:219: RuntimeWarning: numpy.ufunc size changed, may indicate binary incompatibility. Expected 192 from C header, got 216 from PyObject
      return f(*args, **kwds)
    /home/circleci/repo/venv/lib/python3.7/site-packages/nilearn/datasets/__init__.py:89: FutureWarning: Fetchers from the nilearn.datasets module will be updated in version 0.9 to return python strings instead of bytes and Pandas dataframes instead of Numpy arrays.
      "Numpy arrays.", FutureWarning)




.. GENERATED FROM PYTHON SOURCE LINES 18-19

Initialise the NeuroLang probabilistic engine.

.. GENERATED FROM PYTHON SOURCE LINES 19-23

.. code-block:: default


    nl = NeurolangDL()









.. GENERATED FROM PYTHON SOURCE LINES 24-25

Load the Destrieux example from nilearn as a fact list

.. GENERATED FROM PYTHON SOURCE LINES 25-36

.. code-block:: default



    atlas_destrieux = datasets.fetch_atlas_destrieux_2009()
    atlas_labels = {
        label: str(name.decode('utf8'))
        for label, name in atlas_destrieux['labels']
    }


    nl.add_atlas_set('destrieux_atlas', atlas_labels, nib.load(atlas_destrieux['maps']))





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none


    Dataset created in /home/circleci/nilearn_data/destrieux_2009

    Downloading data from https://www.nitrc.org/frs/download.php/11942/destrieux2009.tgz ...
     ...done. (0 seconds, 0 min)
    Extracting data from /home/circleci/nilearn_data/destrieux_2009/b945227ebaa37d6b6e05e49490010f9c/destrieux2009.tgz..... done.
    /home/circleci/repo/venv/lib/python3.7/site-packages/numpy/lib/npyio.py:2407: VisibleDeprecationWarning: Reading unicode strings without specifying the encoding argument is deprecated. Set the encoding, use None for the system default.
      output = genfromtxt(fname, **kwargs)

    destrieux_atlas: typing.AbstractSet[typing.Tuple[str, neurolang.regions.ExplicitVBR]] = ('Background', Region(VBR= affine:[[   2.    0.    0.  -76.]
     [   0.    2.    0. -109.]
     [   0.    0.    2.  -64.]
     [   0.    0.    0.    1.]], voxels:[[ 0  0  0]
     [ 0  0  1]
     [ 0  0  2]
     ...
     [75 92 73]
     [75 92 74]
     [75 92 75]])) ...



.. GENERATED FROM PYTHON SOURCE LINES 37-38

Add utility function

.. GENERATED FROM PYTHON SOURCE LINES 38-44

.. code-block:: default



    @nl.add_symbol
    def startswith(prefix: str, s: str) -> bool:
        return s.startswith(prefix)








.. GENERATED FROM PYTHON SOURCE LINES 45-47

Query all left hemisphere regions superior to the temporal superior sulucs
and anterior to the central sulcus

.. GENERATED FROM PYTHON SOURCE LINES 47-57

.. code-block:: default



    with nl.scope as e:
        e.on_left_hemisphere[e.x] = (
                e.destrieux_atlas(e.l, e.x) & e.startswith('L S', e.l)
        )

        result = nl.query((e.r,), e.on_left_hemisphere(e.r))









.. GENERATED FROM PYTHON SOURCE LINES 58-59

Visualise results

.. GENERATED FROM PYTHON SOURCE LINES 59-68

.. code-block:: default


    subplots = plt.subplots(
        nrows=len(result), ncols=1,
        figsize=(10, 5 * len(result))
    )[1]

    for (r, subplot) in zip(result, subplots):
        region = r[0]
        plotting.plot_roi(region.spatial_image(), axes=subplot)



.. image:: /auto_examples/images/sphx_glr_plot_load_destrieux_left_hemisphere_gyri_001.png
    :alt: plot load destrieux left hemisphere gyri
    :class: sphx-glr-single-img






.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  58.645 seconds)


.. _sphx_glr_download_auto_examples_plot_load_destrieux_left_hemisphere_gyri.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: plot_load_destrieux_left_hemisphere_gyri.py <plot_load_destrieux_left_hemisphere_gyri.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: plot_load_destrieux_left_hemisphere_gyri.ipynb <plot_load_destrieux_left_hemisphere_gyri.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
