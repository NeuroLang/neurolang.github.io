.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_auto_examples_plot_sulcal_queries.py>`     to download the full example code
    .. rst-class:: sphx-glr-example-title

    .. _sphx_glr_auto_examples_plot_sulcal_queries.py:


Sulcal Identification Queries in Neurolang
==============================================


.. code-block:: default


    from matplotlib import pyplot as plt
    import nibabel as nib
    from nilearn import datasets, plotting
    from neurolang.frontend import NeurolangDL









Initialise the NeuroLang probabilistic engine.


.. code-block:: default


    nl = NeurolangDL()









Load the Destrieux example from nilearn as a fact list


.. code-block:: default



    atlas_destrieux = datasets.fetch_atlas_destrieux_2009()
    atlas_labels = {
        label: str(name.decode('utf8'))
        for label, name in atlas_destrieux['labels']
    }


    nl.add_atlas_set('destrieux_atlas', atlas_labels, nib.load(atlas_destrieux['maps']))





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    /Users/dwasserm/anaconda/envs/root3.8-neurosynth/lib/python3.8/site-packages/numpy/lib/npyio.py:2349: VisibleDeprecationWarning: Reading unicode strings without specifying the encoding argument is deprecated. Set the encoding, use None for the system default.
      output = genfromtxt(fname, **kwargs)

    destrieux_atlas: typing.AbstractSet[typing.Tuple[str, neurolang.regions.ExplicitVBR]] = ('Background', Region(VBR= affine:[[   2.    0.    0.  -76.]
     [   0.    2.    0. -109.]
     [   0.    0.    2.  -64.]
     [   0.    0.    0.    1.]], voxels:[[ 0  0  0]
     [ 0  0  1]
     [ 0  0  2]
     ...
     [75 92 73]
     [75 92 74]
     [75 92 75]])) ...



Add utility function


.. code-block:: default



    @nl.add_symbol
    def startswith(prefix: str, s: str) -> bool:
        return s.startswith(prefix)









Define all left sulci and the primary ones


.. code-block:: default


    with nl.environment as e:
        e.left_sulcus[e.name, e.region] = (
            e.destrieux_atlas(e.name, e.region) &
            startswith('L S', e.name)
        )

        e.left_primary_sulcus[e.name, e.region] = (
            e.destrieux_atlas(e.name, e.region) & (
                (e.name == "L S_central") |
                (e.name == "L Lat_Fis-post") |
                (e.name == "L S_pericallosal") |
                (e.name == "L S_parieto_occipital") |
                (e.name == "L S_calcarine") |
                (e.name == "L Lat_Fis-ant-Vertical")
            )
        )








.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  1.250 seconds)


.. _sphx_glr_download_auto_examples_plot_sulcal_queries.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: plot_sulcal_queries.py <plot_sulcal_queries.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: plot_sulcal_queries.ipynb <plot_sulcal_queries.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
